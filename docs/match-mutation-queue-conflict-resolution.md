# Match mutation queue + conflict resolution (non-technical guide)

## What changed

We added two metadata fields on each match row:

- `client_submission_id`: a unique "ticket number" generated by the app for every submitted match.
- `client_payload_hash`: a small fingerprint of the submitted values.

This lets the app safely retry queued offline submissions without creating duplicate rows.

## Conflict resolution rules

When a queued match is retried:

1. If no row exists with the same `(created_by, client_submission_id)`, we insert normally.
2. If a row exists with the same `client_submission_id` **and the same hash**, we treat it as already synced (idempotent replay).
3. If a row exists with the same `client_submission_id` but **different hash**, we mark it as conflict and stop retrying that entry.

## User-visible behavior

- **Pending**: the match is safely stored locally and will auto-sync later.
- **Failed**: retries exceeded; user sees manual retry action.
- **Conflict**: user gets explicit warning to review history before re-submitting.

This prevents silent overwrites when offline data is older than what was already synced from another device/session.
